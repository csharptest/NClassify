<?xml version="1.0" encoding="utf-8" ?>
<NClassify xsi:noNamespaceSchemaLocation="NClassifyConfig.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <settings>
    <namespace>NClassify.Example</namespace>
  </settings>

  <value name="SimpleInt32" base="int32">
    <validation>
      <range min="1" />
    </validation>
  </value>

  <enum name="SampleEnum">
    <value name="one" ordinal="1"/>
    <value name="two" ordinal="2"/>
    <value name="three" ordinal="3"/>
  </enum>

  <value name="SimpleBytes" base="bytes">
    <validation>
      <length min="1" max="255" />
    </validation>
  </value>

  <value name="SimpleText" base="string">
    <validation>
      <predefined>
        <value>abc</value>
        <value>def</value>
        <value>ghi</value>
        <value>jkl</value>
        <value>mno</value>
        <value>pqr</value>
        <value>stu</value>
        <value>vwx</value>
        <value>yz</value>
      </predefined>
    </validation>
  </value>
  
  <value name="simple_uri" base="string">
    <validation>
      <length min="8" max="2048" />
      <match ignoreCase="true" pattern="^https?\://.+" />
      <code language="C#" test="IsValidUri(value)">
        <!--signature is: bool IsValidUri(string value) {-->
        <method>
          global::System.Uri tmp;
          return global::System.Uri.TryCreate(value, global::System.UriKind.Absolute, out tmp);
        </method>
      </code>
    </validation>
  </value>

  <type name="SampleMsg">
    <fields>
      <simple ordinal="1" name="Id" type="SimpleInt32" default="0" />
      <simple ordinal="2" name="uri" type="simple_uri" default="" />
      <simple ordinal="3" name="alpha_group" type="SimpleText" use="required" default="abc" />
      <enum ordinal="4" name="enum" type="SampleEnum" default="1" />
      <simple ordinal="5" name="bytes" type="SimpleBytes" />

      <primitive ordinal="10" name="verified" type="bool" />
      <primitive ordinal="11" name="errors" type="string" array="true" direction="read-only" property="readErrors" access="protected">
        <validation>
          <length max="0"/>
        </validation>
      </primitive>
      
      <complex ordinal="20" name="children" type="SampleMsg" array="true" />
    </fields>
  </type>

  <type name="SingleFields">
    <fields>
      <!-- The following are all valid types types of non-array fields -->
      <primitive ordinal="11" name="bool" type="bool" default="1" />
      <primitive ordinal="12" name="bytes" type="bytes" default="asdf" />
      <primitive ordinal="13" name="int8" type="int8" default="1" />
      <primitive ordinal="14" name="uint8" type="uint8" default="1" />
      <primitive ordinal="15" name="int16" type="int16" default="1" />
      <primitive ordinal="16" name="uint16" type="uint16" default="1" />
      <primitive ordinal="17" name="int32" type="int32" default="1" />
      <primitive ordinal="18" name="uint32" type="uint32" default="1" />
      <primitive ordinal="19" name="int64" type="int64" default="1" />
      <primitive ordinal="20" name="uint64" type="uint64" default="1" />
      <primitive ordinal="21" name="float" type="float" default="1" />
      <primitive ordinal="22" name="double" type="double" default="1" />
      <primitive ordinal="23" name="guid" type="guid" default="new()" />
      <primitive ordinal="24" name="dateTime" type="dateTime" default="now()" />
      <primitive ordinal="25" name="timeSpan" type="timeSpan" default="1:00" />
      <primitive ordinal="26" name="string" type="string" default="1" />
      <enum      ordinal="27" name="enum" type="SampleEnum" default="2" />
      <simple    ordinal="28" name="simple_int32" type="SimpleInt32" default="2" />
      <simple    ordinal="29" name="simple_uri" type="simple_uri" default="http://example.uri" />
      <simple    ordinal="30" name="simple_text" type="SimpleText" use="required" default="def" />
      <simple    ordinal="31" name="simple_bytes" type="SimpleBytes" default="AsdF12==" />
      <complex   ordinal="32" name="sample_msg" type="SampleMsg" />
    </fields>
  </type>

  <type name="ArrayFields">
    <fields>
      <!-- The following are all valid types types of array fields -->
      <primitive ordinal="11" name="bool" type="bool" array="true" />
      <primitive ordinal="12" name="bytes" type="bytes" array="true" />
      <primitive ordinal="13" name="int8" type="int8" array="true" />
      <primitive ordinal="14" name="uint8" type="uint8" array="true" />
      <primitive ordinal="15" name="int16" type="int16" array="true" />
      <primitive ordinal="16" name="uint16" type="uint16" array="true" />
      <primitive ordinal="17" name="int32" type="int32" array="true" />
      <primitive ordinal="18" name="uint32" type="uint32" array="true" />
      <primitive ordinal="19" name="int64" type="int64" array="true" />
      <primitive ordinal="20" name="uint64" type="uint64" array="true" />
      <primitive ordinal="21" name="float" type="float" array="true" />
      <primitive ordinal="22" name="double" type="double" array="true" />
      <primitive ordinal="23" name="guid" type="guid" array="true" />
      <primitive ordinal="24" name="dateTime" type="dateTime" array="true" />
      <primitive ordinal="25" name="timeSpan" type="timeSpan" array="true" />
      <primitive ordinal="26" name="string" type="string" array="true" />
      <enum      ordinal="27" name="enum" type="SampleEnum" array="true" />
      <simple    ordinal="28" name="simple_int32" type="SimpleInt32" array="true" />
      <simple    ordinal="29" name="simple_uri" type="simple_uri" array="true" />
      <simple    ordinal="30" name="simple_text" type="SimpleText" use="required" array="true" />
      <simple    ordinal="31" name="simple_bytes" type="SimpleBytes" array="true" />
      <complex   ordinal="32" name="sample_msg" type="SampleMsg" array="true" />
    </fields>
  </type>

  <service name="CallbackService">
    <method name="Get" returns="SampleMsg" />
    <method name="Put" argument="SampleMsg" returns="SampleMsg" />
    <method name="Delete" argument="SampleMsg" />
  </service>

</NClassify>